= Sputnik IoT Sensor Module â€“ HTTPS + NTP Fallback + Buffer Validation (feat--https-secure-ntp-buffer)
Fathurrahman Lananan (Aman)
v2025-06-05

A feature-extended sketch of the Sputnik IoT system with support for:
- **Secure HTTPS POST** to Google Sheets via `WiFiClientSecure`
- **Fallback logic** using `millis()` for data sampling when NTP is unavailable
- **Buffered data validation** with range checks and recovery for faulty sensor readings

== Overview

This version builds upon the original `sputnik.ino` with robust improvements for field deployment. It collects temperature and humidity readings from a DHT21 sensor every minute, buffers them, and posts **15-minute averaged** values to a Google Sheets endpoint securely over HTTPS.

== Key Features

- âœ… Soft-AP fallback via **WiFiManager**
- âœ… HTTPS-enabled **Google Sheets POST** with `WiFiClientSecure`
- âœ… Enhanced **NTP sync** with retry logic and fallback to internal `millis()` timing
- âœ… Buffer-based **range validation** of temperature and humidity (DHT21 sanity checks)
- âœ… Supports **Arduino IoT Cloud** for real-time updates of `dhtTemp` and `dhtHumi`
- âœ… Auto-clears buffer after successful POST, or retains on failure for retry

== Hardware

- MCU: ESP32 (Tested on ESP32 Dev Module with external antenna)
- Sensor: DHT21 / AM2301 (Data line on GPIO 15)

== Required Libraries

- https://github.com/tzapu/WiFiManager[WiFiManager]
- https://github.com/adafruit/DHT-sensor-library[Adafruit DHT Sensor Library]
- `WiFiClientSecure` and `HTTPClient` (ESP32 core built-in)
- Arduino IoT Cloud SDK (`thingProperties.h`, `arduino_secrets.h`)

== Cloud Integration

To enable `dhtTemp` and `dhtHumi` live updates:
1. Define these variables in the Arduino IoT Cloud dashboard
2. Ensure `SECRET_SSID` and `SECRET_OPTIONAL_PASS` in `arduino_secrets.h` match the WiFiManager-selected SSID

== Data POST

Payload format sent to Google Sheets every 15 minutes:
```json
{
  "temperature": 28.75,
  "humidity": 64.00,
  "mcu": "sputnik1"
}
```

== Sputnik ESP32U Portable MCU Kit

**Sputnik** is a compact and modular ESP32-based microcontroller system equipped with a LiPo battery, OLED screen, and essential IoT components. Housed in a neat container, Sputnik is ideal for quick sketch testing, WiFi diagnostics, and remote deployment for cloud-based applications like Arduino IoT Cloud or Google Sheets logging.

---

## ğŸ§° Features

- ğŸ”§ **ESP32U Dev Board** with external antenna for stronger signal
- ğŸ”‹ **LiPo-powered** via 18650 battery with TP4056 charging circuit
- ğŸŒ¡ï¸ **DHT sensor** (temperature + humidity)
- ğŸ“º **OLED screen** (I2C) for data display
- ğŸ”Œ **Accessible USB** for programming and debugging
- ğŸ§ª **Expandable** â€” add more sensors or modules easily
- ğŸ” Supports both **uplink/downlink** testing and cloud comms

---

## ğŸ§ª Use Cases

- Rapid field testing for Arduino sketches
- Verifying WiFi connectivity in low-signal areas
- Sending data to Google Sheets or RESTful endpoints
- Local monitoring with OLED
- Ideal for student labs and prototype development

---

## ğŸ“¦ Components

| Component       | Description                     |
|----------------|---------------------------------|
| ESP32U Dev Board | External antenna version       |
| OLED Display     | I2C interface, 0.96"           |
| DHT Sensor       | DHT11 or DHT22 supported       |
| TP4056 Module    | Li-ion battery charger         |
| 18650 Battery    | Removable, rechargeable power  |
| Slide Switch     | Main power on/off              |
| ABS Box          | Transparent enclosure          |

---

## ğŸš€ Getting Started

1. Clone the repository and open `.ino` sketch in Arduino IDE.
2. Install required libraries:
   - `DHT sensor library`
   - `Adafruit Unified Sensor`
   - `OneWire` and `DallasTemperature` (if using DS18B20)
   - `Adafruit SSD1306` (if using OLED)
3. Upload to ESP32U and power via USB or battery.
4. Use Serial Monitor to view logs.

---

## ğŸ“¸ Device Preview

| Closed | Internal View |
|--------|---------------|
| ![Boxed View](docs/sputnik-closed.jpg) | ![Inside View](docs/sputnik-open.jpg) |

---

## ğŸ§‘â€ğŸ”¬ Maintainer

Developed by **Aman & Anna** under the **DAFCON Initiative** for advancing smart agricultural & environmental IoT solutions.

---

## ğŸ—‚ï¸ License

MIT â€“ feel free to modify and adapt for your own IoT adventures ğŸš€
