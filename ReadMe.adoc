= Sputnik IoT Sensor Module – HTTPS + NTP Fallback + Buffer Validation (feat--https-secure-ntp-buffer)
Fathurrahman Lananan (Aman)
v2025-06-05

A feature-extended sketch of the Sputnik IoT system with support for:
- **Secure HTTPS POST** to Google Sheets via `WiFiClientSecure`
- **Fallback logic** using `millis()` for data sampling when NTP is unavailable
- **Buffered data validation** with range checks and recovery for faulty sensor readings

== Overview

This version builds upon the original `sputnik.ino` with robust improvements for field deployment. It collects temperature and humidity readings from a DHT21 sensor every minute, buffers them, and posts **15-minute averaged** values to a Google Sheets endpoint securely over HTTPS.

== Key Features

- ✅ Soft-AP fallback via **WiFiManager**
- ✅ HTTPS-enabled **Google Sheets POST** with `WiFiClientSecure`
- ✅ Enhanced **NTP sync** with retry logic and fallback to internal `millis()` timing
- ✅ Buffer-based **range validation** of temperature and humidity (DHT21 sanity checks)
- ✅ Supports **Arduino IoT Cloud** for real-time updates of `dhtTemp` and `dhtHumi`
- ✅ Auto-clears buffer after successful POST, or retains on failure for retry

== Hardware

- MCU: ESP32 (Tested on ESP32 Dev Module with external antenna)
- Sensor: DHT21 / AM2301 (Data line on GPIO 15)

== Required Libraries

- https://github.com/tzapu/WiFiManager[WiFiManager]
- https://github.com/adafruit/DHT-sensor-library[Adafruit DHT Sensor Library]
- `WiFiClientSecure` and `HTTPClient` (ESP32 core built-in)
- Arduino IoT Cloud SDK (`thingProperties.h`, `arduino_secrets.h`)

== Cloud Integration

To enable `dhtTemp` and `dhtHumi` live updates:
1. Define these variables in the Arduino IoT Cloud dashboard
2. Ensure `SECRET_SSID` and `SECRET_OPTIONAL_PASS` in `arduino_secrets.h` match the WiFiManager-selected SSID

== Data POST

Payload format sent to Google Sheets every 15 minutes:
```json
{
  "temperature": 28.75,
  "humidity": 64.00,
  "mcu": "sputnik1"
}
